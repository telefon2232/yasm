# üî¨ ASM Lens

**VS Code —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞ —Ä—è–¥–æ–º —Å –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º C/C++.**

–û—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∑–∞—Å—Å–µ–º–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞ –≤ —Å–æ—Å–µ–¥–Ω–µ–π –ø–∞–Ω–µ–ª–∏ –∏ —Å–≤—è–∑—ã–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫–∏
–∏—Å—Ö–æ–¥–Ω–∏–∫–∞ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞ —Ü–≤–µ—Ç–æ–≤—ã–º –º–∞–ø–ø–∏–Ω–≥–æ–º ‚Äî –∫–∞–∫ –≤ Compiler Explorer (Godbolt),
–Ω–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤.

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üé® **–¶–≤–µ—Ç–æ–≤–æ–π –º–∞–ø–ø–∏–Ω–≥** ‚Äî –∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –µ–π –±–ª–æ–∫ asm –æ–∫—Ä–∞—à–µ–Ω—ã –æ–¥–Ω–∏–º —Ü–≤–µ—Ç–æ–º
- üîÑ **–î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è** ‚Äî –∫–ª–∏–∫ –ø–æ –∏—Å—Ö–æ–¥–Ω–∏–∫—É –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç asm, –∫–ª–∏–∫ –ø–æ asm –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω–∏–∫
- üìÇ **–ú–Ω–æ–≥–æ—Ñ–∞–π–ª–æ–≤—ã–µ –ø—Ä–æ–µ–∫—Ç—ã** ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–≥–¥–∞ –±–∏–Ω–∞—Ä–Ω–∏–∫ —Å–æ–±—Ä–∞–Ω –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö `.c` —Ñ–∞–π–ª–æ–≤
- ‚ö° **–ê–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** ‚Äî —Å–ª–µ–¥–∏—Ç –∑–∞ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–º –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∏–∑–∞—Å—Å–µ–º–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- üîç **Auto-detect** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç GNU objdump –∏–ª–∏ LLVM objdump

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ

```bash
code --install-extension bin/asm-lens-0.1.0.vsix
```

### 2. –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç —Å –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

```bash
gcc -g -O1 -o main main.c
```

> ‚ö†Ô∏è –§–ª–∞–≥ `-g` –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω ‚Äî –±–µ–∑ –Ω–µ–≥–æ DWARF-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ –ø–æ–ø–∞–¥—ë—Ç –≤ –±–∏–Ω–∞—Ä–Ω–∏–∫ –∏ –º–∞–ø–ø–∏–Ω–≥ –Ω–µ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç.

### 3. –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥ `.asm-lens.json` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

```json
{
  "binary": "./main",
  "sourceRoot": "."
}
```

–ò–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É: `Ctrl+Shift+P` ‚Üí **ASM Lens: Initialize Config**

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å

`Ctrl+Shift+P` ‚Üí **ASM Lens: Show Assembly**

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–§–∞–π–ª `.asm-lens.json` –≤ –∫–æ—Ä–Ω–µ —Ä–∞–±–æ—á–µ–π –ø–∞–ø–∫–∏:

```json
{
  "binary": "./main",
  "sourceRoot": ".",
  "objdump": "objdump",
  "objdumpArgs": ["-M", "intel"],
  "sections": [".text"]
}
```

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|:---:|---|---|
| `binary` | ‚úÖ | ‚Äî | –ü—É—Ç—å –¥–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞ |
| `sourceRoot` | ‚Äî | `"."` | –ö–æ—Ä–µ–Ω—å –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ (–¥–ª—è —Ä–µ–∑–æ–ª–≤–∞ –ø—É—Ç–µ–π –∏–∑ DWARF) |
| `objdump` | ‚Äî | auto-detect | –ü—É—Ç—å –∫ `objdump` –∏–ª–∏ `llvm-objdump` |
| `objdumpArgs` | ‚Äî | `[]` | –î–æ–ø. –∞—Ä–≥—É–º–µ–Ω—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä `["-M", "intel"]` –¥–ª—è Intel-—Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞) |
| `sections` | ‚Äî | `[".text"]` | –°–µ–∫—Ü–∏–∏ –¥–ª—è –¥–∏–∑–∞—Å—Å–µ–º–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è |

---

## üìñ –ü—Ä–∏–º–µ—Ä (–º–Ω–æ–≥–æ—Ñ–∞–π–ª–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç)

–í –ø–∞–ø–∫–µ `example/` –ª–µ–∂–∏—Ç –≥–æ—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä –∏–∑ –¥–≤—É—Ö —Ñ–∞–π–ª–æ–≤:

```
example/
‚îú‚îÄ‚îÄ main.c            ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ math_utils.h      ‚Äî –∑–∞–≥–æ–ª–æ–≤–æ–∫
‚îú‚îÄ‚îÄ math_utils.c      ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (square, sum_squares)
‚îî‚îÄ‚îÄ .asm-lens.json    ‚Äî –∫–æ–Ω—Ñ–∏–≥
```

```bash
cd example
gcc -g -O1 -o main main.c math_utils.c
code .
```

–ó–∞—Ç–µ–º `Ctrl+Shift+P` ‚Üí **ASM Lens: Show Assembly** ‚Äî –∏ –≥–æ—Ç–æ–≤–æ.

---

## üõ† –ö–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| **ASM Lens: Show Assembly** | –û—Ç–∫—Ä—ã—Ç—å –ø–∞–Ω–µ–ª—å —Å –¥–∏–∑–∞—Å—Å–µ–º–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º |
| **ASM Lens: Refresh Disassembly** | –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∏–∑–∞—Å—Å–µ–º–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ |
| **ASM Lens: Initialize Config** | –°–æ–∑–¥–∞—Ç—å `.asm-lens.json` —á–µ—Ä–µ–∑ –¥–∏–∞–ª–æ–≥ |
| **ASM Lens: Diff Assembly** | –°—Ä–∞–≤–Ω–∏—Ç—å asm –¥–≤—É—Ö –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤ –≤ diff-—Ä–µ–∂–∏–º–µ |

---

## üìä Status Bar

–ü–æ—Å–ª–µ `Show Assembly` –≤ —Å—Ç–∞—Ç—É—Å-–±–∞—Ä–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:

```
$(file-binary) main | 12 funcs | gnu
```

- –ò–º—è –±–∏–Ω–∞—Ä–Ω–∏–∫–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ—É–Ω–∫—Ü–∏–π, —Ç–∏–ø objdump
- –ö–ª–∏–∫ –ø–æ –Ω–µ–º—É ‚Äî –±—ã—Å—Ç—Ä—ã–π refresh

---

## üîÄ Diff Mode

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞ –¥–≤—É—Ö –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å —Ä–∞–∑–Ω—ã–º–∏ —Ñ–ª–∞–≥–∞–º–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏):

```bash
gcc -g -O1 -o main_O1 main.c math_utils.c
gcc -g -O2 -o main_O2 main.c math_utils.c
```

–ó–∞—Ç–µ–º `Ctrl+Shift+P` ‚Üí **ASM Lens: Diff Assembly** ‚Üí –≤—ã–±—Ä–∞—Ç—å `main_O1` ‚Üí –≤—ã–±—Ä–∞—Ç—å `main_O2`.

–û—Ç–∫—Ä–æ–µ—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π diff editor VS Code —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Ä–∞–∑–ª–∏—á–∏–π –º–µ–∂–¥—É –¥–≤—É–º—è –≤–µ—Ä—Å–∏—è–º–∏ asm.

---

## üèó –°–±–æ—Ä–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤

```bash
cd asm-lens
npm install
npm run compile
npx vsce package --allow-missing-repository --out bin/asm-lens-0.1.0.vsix
```

---

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- VS Code ‚â• 1.85
- `objdump` (GNU) –∏–ª–∏ `llvm-objdump` –≤ PATH
- –ë–∏–Ω–∞—Ä–Ω–∏–∫, —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å `-g` (DWARF debug info)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
