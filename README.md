# üî¨ YASM

**VS Code —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞ —Ä—è–¥–æ–º —Å –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º C/C++.**

–û—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∑–∞—Å—Å–µ–º–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞ –≤ —Å–æ—Å–µ–¥–Ω–µ–π –ø–∞–Ω–µ–ª–∏ –∏ —Å–≤—è–∑—ã–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫–∏
–∏—Å—Ö–æ–¥–Ω–∏–∫–∞ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞ —Ü–≤–µ—Ç–æ–≤—ã–º –º–∞–ø–ø–∏–Ω–≥–æ–º ‚Äî –∫–∞–∫ –≤ Compiler Explorer (Godbolt),
–Ω–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤.

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üé® **–¶–≤–µ—Ç–æ–≤–æ–π –º–∞–ø–ø–∏–Ω–≥** ‚Äî –∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –µ–π –±–ª–æ–∫ asm –æ–∫—Ä–∞—à–µ–Ω—ã –æ–¥–Ω–∏–º —Ü–≤–µ—Ç–æ–º
- üîÑ **–î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è** ‚Äî –∫–ª–∏–∫ –ø–æ –∏—Å—Ö–æ–¥–Ω–∏–∫—É –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç asm, –∫–ª–∏–∫ –ø–æ asm –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω–∏–∫
- üìÇ **–ú–Ω–æ–≥–æ—Ñ–∞–π–ª–æ–≤—ã–µ –ø—Ä–æ–µ–∫—Ç—ã** ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–≥–¥–∞ –±–∏–Ω–∞—Ä–Ω–∏–∫ —Å–æ–±—Ä–∞–Ω –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö `.c` —Ñ–∞–π–ª–æ–≤
- ‚ö° **–ê–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** ‚Äî —Å–ª–µ–¥–∏—Ç –∑–∞ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–º –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∏–∑–∞—Å—Å–µ–º–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- üîç **Auto-detect** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç GNU objdump –∏–ª–∏ LLVM objdump
- üî• **Live Mode** ‚Äî Godbolt-–ø–æ–¥–æ–±–Ω—ã–π —Ä–µ–∂–∏–º: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç —Ç–µ–∫—É—â–∏–π —Ñ–∞–π–ª –≤ `.o` –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç asm –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏–ª–∏ –ø–æ —Ç–∞–π–º–µ—Ä—É
- üîÄ **Diff Mode** ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ asm –¥–≤—É—Ö –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤ side-by-side —Å —Ü–≤–µ—Ç–æ–≤—ã–º –º–∞–ø–ø–∏–Ω–≥–æ–º

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ

```bash
code --install-extension bin/yasm-0.1.0.vsix
```

### 2. –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç —Å –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

```bash
gcc -g -O1 -o main main.c
```

> –§–ª–∞–≥ `-g` –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω ‚Äî –±–µ–∑ –Ω–µ–≥–æ DWARF-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ –ø–æ–ø–∞–¥—ë—Ç –≤ –±–∏–Ω–∞—Ä–Ω–∏–∫ –∏ –º–∞–ø–ø–∏–Ω–≥ –Ω–µ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç.

### 3. –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥ `.yasm.json` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

–ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É: `Ctrl+Shift+P` ‚Üí **YASM: Initialize Config** ‚Äî —Å–æ–∑–¥–∞—Å—Ç –∫–æ–Ω—Ñ–∏–≥ —Å –ø–æ–ª–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º –ø–æ–ª–µ–π.

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:

```json
{
  "binary": "./main",
  "sourceRoot": "."
}
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å

`Ctrl+Shift+P` ‚Üí **YASM: Show Assembly**

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–§–∞–π–ª `.yasm.json` –≤ –∫–æ—Ä–Ω–µ —Ä–∞–±–æ—á–µ–π –ø–∞–ø–∫–∏:

```json
{
  "binary": "./main",
  "sourceRoot": ".",
  "objdump": "objdump",
  "objdumpArgs": ["-M", "intel"],
  "sections": [".text"],
  "liveMode": {
    "compileCommand": "gcc -g -O2 -c {file} -o {output}",
    "trigger": "save",
    "interval": 500
  }
}
```

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|:---:|---|---|
| `binary` | –¥–∞ | ‚Äî | –ü—É—Ç—å –¥–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞ |
| `sourceRoot` | ‚Äî | `"."` | –ö–æ—Ä–µ–Ω—å –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ (–¥–ª—è —Ä–µ–∑–æ–ª–≤–∞ –ø—É—Ç–µ–π –∏–∑ DWARF) |
| `objdump` | ‚Äî | auto-detect | –ü—É—Ç—å –∫ `objdump` –∏–ª–∏ `llvm-objdump` |
| `objdumpArgs` | ‚Äî | `[]` | –î–æ–ø. –∞—Ä–≥—É–º–µ–Ω—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä `["-M", "intel"]` –¥–ª—è Intel-—Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞) |
| `sections` | ‚Äî | `[".text"]` | –°–µ–∫—Ü–∏–∏ –¥–ª—è –¥–∏–∑–∞—Å—Å–µ–º–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è |
| `liveMode.compileCommand` | ‚Äî | ‚Äî | –ö–æ–º–∞–Ω–¥–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏. `{file}` ‚Äî –∏—Å—Ö–æ–¥–Ω–∏–∫, `{output}` ‚Äî –≤—ã—Ö–æ–¥–Ω–æ–π `.o` |
| `liveMode.trigger` | ‚Äî | `"save"` | `"save"` ‚Äî –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏, `"live"` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ —Ç–∞–π–º–µ—Ä—É |
| `liveMode.interval` | ‚Äî | `500` | –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –º—Å (—Ç–æ–ª—å–∫–æ –¥–ª—è `"live"`) |

---

## üõ† –ö–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| **YASM: Show Assembly** | –û—Ç–∫—Ä—ã—Ç—å –ø–∞–Ω–µ–ª—å —Å –¥–∏–∑–∞—Å—Å–µ–º–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º –±–∏–Ω–∞—Ä–Ω–∏–∫–∞ |
| **YASM: Refresh Disassembly** | –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∏–∑–∞—Å—Å–µ–º–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ |
| **YASM: Initialize Config** | –°–æ–∑–¥–∞—Ç—å `.yasm.json` —á–µ—Ä–µ–∑ –¥–∏–∞–ª–æ–≥ |
| **YASM: Diff Assembly** | –°—Ä–∞–≤–Ω–∏—Ç—å asm –¥–≤—É—Ö –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤ –≤ diff-—Ä–µ–∂–∏–º–µ |
| **YASM: Live Mode** | –ñ–∏–≤–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Ñ–∞–π–ª–∞ –≤ `.o` —Å –ø–æ–∫–∞–∑–æ–º asm. –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–∑–æ–≤ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç |

Status bar –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º, –∏–º—è –±–∏–Ω–∞—Ä–Ω–∏–∫–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ—É–Ω–∫—Ü–∏–π; –∫–ª–∏–∫ ‚Äî refresh.

---

## üî• Live Mode

–†–µ–∂–∏–º –∂–∏–≤–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ ‚Äî –∞–Ω–∞–ª–æ–≥ Godbolt, –Ω–æ –≤ IDE. –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç —Ç–µ–∫—É—â–∏–π `.c/.cpp` —Ñ–∞–π–ª –≤ –æ–±—ä–µ–∫—Ç–Ω—ã–π —Ñ–∞–π–ª –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –µ–≥–æ asm side-by-side.

1. –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é `liveMode` –≤ `.yasm.json`:

```json
{
  "binary": "./main",
  "sourceRoot": ".",
  "liveMode": {
    "compileCommand": "gcc -g -O2 -c {file} -o {output}",
    "trigger": "save"
  }
}
```

2. –û—Ç–∫—Ä—ã—Ç—å `.c` —Ñ–∞–π–ª –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å `Ctrl+Shift+P` ‚Üí **YASM: Live Mode**

–ü—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ (–∏–ª–∏ –ø–æ —Ç–∞–π–º–µ—Ä—É –≤ —Ä–µ–∂–∏–º–µ `"live"`) —Ñ–∞–π–ª –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –∏ asm –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –û—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ Output Channel "YASM Live".

–í `compileCommand` –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å–∫—Ä–∏–ø—Ç (`./build.sh {file} {output}`), –∫–æ—Ç–æ—Ä—ã–π —Å–æ–±–µ—Ä—ë—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ –∫–æ–º–ø–∏–ª—è—Ü–∏–µ–π –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.

---

## üîÄ Diff Mode

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞ –¥–≤—É—Ö –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å —Ä–∞–∑–Ω—ã–º–∏ —Ñ–ª–∞–≥–∞–º–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏):

```bash
gcc -g -O1 -o main_O1 main.c math_utils.c
gcc -g -O2 -o main_O2 main.c math_utils.c
```

–ó–∞—Ç–µ–º `Ctrl+Shift+P` ‚Üí **YASM: Diff Assembly** ‚Üí –≤—ã–±—Ä–∞—Ç—å `main_O1` ‚Üí –≤—ã–±—Ä–∞—Ç—å `main_O2`.

–û–±–∞ asm –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è side-by-side —Å —Ü–≤–µ—Ç–æ–≤—ã–º –º–∞–ø–ø–∏–Ω–≥–æ–º –∫ –∏—Å—Ö–æ–¥–Ω–∏–∫—É.

---

## üìñ –ü—Ä–∏–º–µ—Ä (–º–Ω–æ–≥–æ—Ñ–∞–π–ª–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç)

–í –ø–∞–ø–∫–µ `example/` –ª–µ–∂–∏—Ç –≥–æ—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä –∏–∑ –¥–≤—É—Ö —Ñ–∞–π–ª–æ–≤:

```
example/
‚îú‚îÄ‚îÄ main.c            ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ math_utils.h      ‚Äî –∑–∞–≥–æ–ª–æ–≤–æ–∫
‚îú‚îÄ‚îÄ math_utils.c      ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (square, sum_squares)
‚îî‚îÄ‚îÄ .yasm.json        ‚Äî –∫–æ–Ω—Ñ–∏–≥
```

```bash
cd example
gcc -g -O1 -o main main.c math_utils.c
code .
```

–ó–∞—Ç–µ–º `Ctrl+Shift+P` ‚Üí **YASM: Show Assembly** ‚Äî –∏ –≥–æ—Ç–æ–≤–æ.

---

## üèó –°–±–æ—Ä–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤

```bash
npm install
npm run compile
npx vsce package --allow-missing-repository --out bin/yasm-0.1.0.vsix
```

---

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- VS Code >= 1.85
- `objdump` (GNU) –∏–ª–∏ `llvm-objdump` –≤ PATH
- –ë–∏–Ω–∞—Ä–Ω–∏–∫, —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å `-g` (DWARF debug info)
