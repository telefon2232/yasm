# Проект: VS Code расширение для анализа ассемблера

Цель: расширение для VS Code, которое получает дизассемблирование
из бинарника (через `objdump`), связывает строки asm с исходниками
и подсвечивает пары при наведении курсора мыши.

## Функциональность (кратко)
- Берет путь к бинарнику, запускает `objdump`, парсит вывод.
- Строит соответствие: строка исходника ⇄ диапазон адресов/строк asm.
- При hover на строке исходника подсвечивает связанные строки asm.
- При hover на строке asm подсвечивает соответствующую строку исходника.

## Как это должно работать
1) Пользователь указывает бинарник и корень исходников.
2) Расширение запускает `objdump` и сохраняет маппинг в памяти.
3) Отображает asm в отдельной панели (side-by-side).
4) Hover и подсветка работают в обе стороны.

## Конфиг
Файл `.yasm.json` в корне проекта:
```json
{
  "binary": "./main",
  "sourceRoot": ".",
  "objdump": "objdump",
  "objdumpArgs": ["-M", "intel"],
  "sections": [".text"],
  "liveMode": {
    "compileCommand": "gcc -g -O2 -c {file} -o {output}",
    "trigger": "save",
    "interval": 500
  }
}
```

| Поле | Описание |
|------|----------|
| `binary` | Путь к скомпилированному бинарнику (обязательно) |
| `sourceRoot` | Корень исходников для резолва путей из DWARF |
| `objdump` | Путь к objdump (GNU или LLVM), по умолчанию автодетект |
| `objdumpArgs` | Доп. аргументы для objdump |
| `sections` | Секции для дизассемблирования |
| `liveMode.compileCommand` | Команда компиляции. `{file}` — исходник, `{output}` — выходной .o |
| `liveMode.trigger` | `"save"` — при сохранении, `"live"` — автоматически по таймеру |
| `liveMode.interval` | Интервал проверки изменений в мс для режима `"live"` (по умолчанию 500) |

## Команды
- **`YASM: Show Assembly`** — дизассемблирует бинарник и показывает side-by-side с исходником.
- **`YASM: Refresh Disassembly`** — перечитывает бинарник и обновляет asm.
- **`YASM: Initialize Config`** — создаёт `.yasm.json` с полным набором полей.
- **`YASM: Diff Assembly`** — выбираешь два бинарника, расширение дизассемблирует оба и показывает side-by-side.
- **`YASM: Live Mode`** — режим живой компиляции. Компилирует текущий исходник в .o и показывает asm при каждом сохранении или изменении (как Godbolt). Повторный вызов останавливает режим.

## Дополнительные фичи
- **Status Bar** — показывает имя бинарника, количество функций, тип тула (GNU/LLVM). Клик — refresh.
- **Diff Mode** — выбираешь два бинарника, расширение дизассемблирует оба и открывает оба asm side-by-side.
- **Live Mode** — Godbolt-подобный режим: при изменении/сохранении исходника автоматически компилирует .o и обновляет asm. Ошибки компиляции выводятся в Output Channel "YASM Live".

## Нефункциональные требования
- Минимум зависимостей (по возможности стандартные библиотеки).
- Простая структура и ясный код.
- Сборка в `bin/`.
