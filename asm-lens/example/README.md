# ASM Lens — пример

## Быстрый старт

### 1. Скомпилировать пример с отладочной информацией

```bash
gcc -g -O1 -o main main.c
```

Флаги:
- `-g` — DWARF-отладка (обязательно, без неё маппинг не работает)
- `-O1` — оптимизации, чтобы ассемблер был интереснее (можно `-O0`, `-O2`)

### 2. Установить расширение (если ещё не установлено)

```bash
code --install-extension ../asm-lens-0.1.0.vsix
```

### 3. Открыть папку example в VS Code

```bash
code .
```

### 4. Запустить

1. `Ctrl+Shift+P` → **ASM Lens: Show Assembly**
2. Справа откроется панель с дизассемблером
3. Строки исходника и ассемблера окрашены в одинаковые цвета (матчинг)
4. Кликните на строку — соответствующие строки подсветятся ярче

## Структура

```
example/
├── main.c            — исходный код
├── .asm-lens.json    — конфиг для ASM Lens
└── README.md         — эта инструкция
```

## Конфиг .asm-lens.json

```json
{
  "binary": "./main",
  "sourceRoot": "."
}
```

- `binary` — путь до скомпилированного бинарника
- `sourceRoot` — корень исходников (для резолва путей из DWARF)

## Дополнительные опции конфига

```json
{
  "binary": "./main",
  "sourceRoot": ".",
  "objdump": "objdump",
  "objdumpArgs": [],
  "sections": [".text"]
}
```

- `objdump` — путь к objdump/llvm-objdump (auto-detect по умолчанию)
- `objdumpArgs` — дополнительные аргументы
- `sections` — секции для дизассемблирования (по умолчанию `.text`)
